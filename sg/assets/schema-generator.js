document.addEventListener("DOMContentLoaded",()=>{let p=location.pathname,u=location.href,t=document.querySelector("h1")?.innerText||document.title,pt=document.body.innerText||"",d=document.querySelector("time")?.getAttribute("datetime")||"",o="Engg-Tech",dr=document.querySelector('meta[name="description"]')?.content||"",isSG=p.startsWith("/sg"),BASE_URL=isSG?"https://engg-tech.com/sg/":"https://engg-tech.com/";function ed(r,p,t){r=r.replace(/\s+/g," ").trim();let f=p.split(".")[0];f&&f.length>40&&f.length<200&&(r=f.trim());let ct=t.replace(/[^a-zA-Z0-9 ]/g,""),k=ct.split(" ")[0];k&&!r.toLowerCase().includes(k.toLowerCase())&&(r=ct+": "+r);["fire protection","M&E","construction","engineering services"].forEach(x=>{r.toLowerCase().includes(x)||(r+=", "+x)});return r.length>155?r.substring(0,152)+"...":r}let desc=ed(dr,pt,t),g=[],a=n=>g.push(n);a({"@type":"WebSite",name:o,url:BASE_URL});let biz={"@type":"ConstructionBusiness",name:o,url:BASE_URL,description:isSG?"Fire protection, M&E and construction services in Singapore.":"Fire protection, M&E and construction services.",foundingDate:"2015"};isSG&&(biz.address={"@type":"PostalAddress",addressCountry:"SG"});a(biz);if(p!=="/"&&p!=="/index.html"){let c=[],parts=p.split("/").filter(Boolean).filter(x=>x!=="index.html"),r=isSG?"/sg/":"/";c.push({"@type":"ListItem",position:1,name:"Home",item:{"@id":BASE_URL}});parts.slice(isSG?1:0).forEach((s,i)=>{let seg=s.replace(/\.html$/,"");r+=seg+"/";c.push({"@type":"ListItem",position:i+2,name:seg.replace(/[-_]/g," ").replace(/\b\w/g,m=>m.toUpperCase()),item:{"@id":location.origin+r}})});a({"@type":"BreadcrumbList",itemListElement:c})}if(p==="/"||p==="/index.html")a({"@type":"WebPage",name:"Engg-Tech | Fire Protection, M&E & Construction Contractor",description:desc,url:u});if(isSG&&(p==="/sg/"||p==="/sg/index.html"))a({"@type":"WebPage",name:"Fire Protection & M&E Contractor in Singapore | Engg-Tech",description:desc,url:u});p.includes("/about")&&a({"@type":"AboutPage",name:t,description:desc,url:u});p.includes("/projects")&&a({"@type":"CollectionPage",name:isSG?"Projects in Singapore | Engg-Tech":"Projects | Engg-Tech",description:desc,url:u});p.startsWith("/sg/blog/")&&p.endsWith(".html")&&a({"@type":"BlogPosting",headline:t,description:desc,datePublished:d||new Date().toISOString(),author:{"@type":"Organization",name:o},mainEntityOfPage:u});let fi=[...document.querySelectorAll(".faq-item")];fi.length>1&&a({"@type":"FAQPage",mainEntity:fi.map(x=>{let q=x.querySelector("strong")?.innerText,a1=x.querySelector("p")?.innerText;return q&&a1?{"@type":"Question",name:q,acceptedAnswer:{"@type":"Answer",text:a1}}:null}).filter(Boolean)});g.length||a({"@type":"WebPage",name:t,description:desc,url:u});let sc=document.createElement("script");sc.type="application/ld+json",sc.textContent=JSON.stringify({"@context":"https://schema.org","@graph":g}),document.head.appendChild(sc)});
