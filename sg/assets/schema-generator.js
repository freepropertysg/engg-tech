document.addEventListener("DOMContentLoaded",()=>{let p=location.pathname,u=location.href,t=document.querySelector("h1")?.innerText||document.title,pt=document.body.innerText||"",d=document.querySelector("time")?.getAttribute("datetime")||"",o="Engg-Tech Construction Pte. Ltd.",dr=document.querySelector('meta[name="description"]')?.content||"",parts=p.split("/").filter(Boolean),seg=parts[0]||null,isCountry=seg==="sg",countryCode=isCountry?"SG":null,countryLabel=isCountry?"Singapore":null,BASE_URL=isCountry?"https://engg-tech.com/sg/":"https://engg-tech.com/";(()=>{let h=p;h.endsWith("/")&&(h+="index.html"),!h.endsWith(".html")&&h.split("/").includes("blog")&&(h+=".html");let c=location.origin+h,l=document.querySelector('link[rel="canonical"]')||document.createElement("link");l.rel="canonical",l.href=c,l.parentNode||document.head.appendChild(l)})();function ed(r,p,t){r=r.replace(/\s+/g," ").trim();let f=p.split(".")[0];!r&&f.length>40&&f.length<200&&(r=f.trim());let ct=t.replace(/[^a-zA-Z0-9 ]/g,""),k=ct.split(" ")[0];k&&!r.toLowerCase().includes(k.toLowerCase())&&(r=ct+": "+r);return["fire protection","M&E contractor","construction","renovation","engineering services"].forEach(x=>{r.toLowerCase().includes(x.toLowerCase())||(r+=", "+x)}),r.length>155?r.substring(0,152)+"...":r}let desc=ed(dr,pt,t),g=[],a=n=>g.push(n);a({"@type":"WebSite",name:o,url:BASE_URL});let biz={"@type":"ConstructionBusiness",name:o,url:BASE_URL,description:isCountry?"Certified fire protection and M&E contractor serving Singapore.":"Professional fire protection, M&E and construction services.",foundingDate:"2015"};countryCode&&(biz.address={"@type":"PostalAddress",addressCountry:countryCode});a(biz);if(p!=="/"&&p!=="/index.html"){let crumbs=[],run=isCountry?"/sg/":"/";crumbs.push({"@type":"ListItem",position:0,name:"Home",item:{"@id":BASE_URL}}),parts.slice(isCountry?1:0).forEach((s,i)=>{let c=s.replace(/\.html$/,"");run+=c+"/",crumbs.push({"@type":"ListItem",position:i+1,name:c.replace(/[-_]/g," ").replace(/\b\w/g,m=>m.toUpperCase()),item:{"@id":location.origin+run}})}),a({"@type":"BreadcrumbList",itemListElement:crumbs})}if(p==="/"||p==="/index.html")a({"@type":"WebPage",name:"Engg-Tech Construction | Fire Protection & M&E Contractor",description:desc,url:u});if(isCountry&&(p==="/sg/"||p==="/sg/index.html"))a({"@type":"WebPage",name:"Fire Protection & M&E Contractor in Singapore | Engg-Tech",description:desc,url:u});p.includes("/about")&&a({"@type":"AboutPage",name:t,description:desc,url:u});p.includes("/projects")&&a({"@type":"CollectionPage",name:isCountry?"Projects in Singapore | Engg-Tech":"Projects | Engg-Tech",description:desc,url:u});let fi=[...document.querySelectorAll(".faq-item")];fi.length>1&&a({"@type":"FAQPage",mainEntity:fi.map(x=>{let q=x.querySelector("strong")?.innerText,a1=x.querySelector("p")?.innerText;return q&&a1?{"@type":"Question",name:q,acceptedAnswer":{"@type":"Answer",text:a1}}:null}).filter(Boolean)});g.length||a({"@type":"WebPage",name:t,description:desc,url:u});let sc=document.createElement("script");sc.type="application/ld+json",sc.textContent=JSON.stringify({"@context":"https://schema.org","@graph":g}),document.head.appendChild(sc)});
