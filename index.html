<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description"
  content="Singapore fire protection and M&E contractor providing fire alarm, sprinkler, renovation, electrical and plumbing services." />
  <title>Fire Protection & M&E Contractor in Singapore | Engg-Tech Construction</title>
  <!-- ‚úÖ Favicon -->
  <link rel="shortcut icon" href="https://engg-tech.com//sg/assets/favicon/favicon.ico" type="image/x-icon">
  <meta name="theme-color" content="#ffffff">
<!-- Load CSS -->
<link rel="stylesheet" href="/sg/assets/style.css">
<script defer src="/sg/assets/schema-generator.js"></script>
</head>
<body id="page-top">
<noscript>
<div role="alert" style="background-color: #f4623a; color: #ffffff; padding: 1rem; text-align: center; font-weight: 600; font-size: 1rem;">
    ‚ö†Ô∏è JavaScript is disabled. Some features of Engg-Tech.com may not work as expected. Please enable JavaScript for full functionality.
  </div>
</noscript>

<!-- Engg-Tech Navbar -->
<div id="site-nav"></div>
<script src="/sg/assets/header.js"></script>

<!-- Content section -->
<div style="padding-left: 1.5rem; padding-right: 1.5rem; box-sizing: border-box;">
<section>
<!-- Live Chat -->
<div id="chatBox" role="region" aria-label="Live chat support"
style="
  position:relative;
  margin:3rem auto;
  background:#fff;
  padding:20px 35px 20px 20px;
  max-width:500px;
  width:100%;
  font-family:sans-serif;
  border-radius:0;
  box-shadow:none;
">

  <h3 id="greeting" style="margin-top:0;color:#000000;">Hello!</h3>
  <p>
    Start a live chat with our team.<br>
    Enter your details and message below to begin.
  </p>

  <input type="text" id="chatHoneypot" style="display:none" autocomplete="off">

  <input type="text" id="chatName" placeholder="Your Name"
    style="width:100%;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:0;">

  <input type="email" id="chatEmail" placeholder="Your Email"
    style="width:100%;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:0;">

  <textarea id="chatMessage" placeholder="Your Enquiry..."
    style="width:100%;height:100px;padding:10px;border:1px solid #ccc;border-radius:0;resize:none;"></textarea>

  <div style="margin-top:12px;">
    <label style="font-weight:600;">
      What is <span id="chatCaptchaQ">1 + 1</span>?
    </label>
    <input type="number" id="chatCaptcha" required
      style="width:100%;padding:10px;margin-top:6px;border:1px solid #ccc;border-radius:0;">
  </div>

  <button id="chatSendBtn" onclick="sendChatMessage()"
    style="
      margin-top:14px;
      background:#007bff;
      color:#fff;
      border:none;
      padding:10px 24px;
      border-radius:0;
      font-size:1rem;
      cursor:pointer;
    ">
    Send
  </button>

  <div id="cooldownMsg"
    style="margin-top:12px;font-size:0.9rem;color:#c00;display:none;"></div>

  <div id="chatResponse"
    style="margin-top:16px;font-size:0.95rem;color:#333;"></div>

</div>

<script data-exec>
let correctAnswer, x, y, chatFormStart = Date.now();
const cooldownKey = "enggtech_chat_last_submit";

(function initCaptcha() {
  x = Math.floor(Math.random() * 6) + 1;
  y = Math.floor(Math.random() * 6) + 1;
  correctAnswer = x + y;
  document.getElementById("chatCaptchaQ").textContent = `${x} + ${y}`;
})();

function formatTime(ms) {
  const minutes = Math.floor(ms / 60000);
  const seconds = Math.floor((ms % 60000) / 1000);
  return `${minutes}m ${seconds}s`;
}

function checkCooldown() {
  const last = localStorage.getItem(cooldownKey);
  const now = Date.now();
  const btn = document.getElementById("chatSendBtn");
  const msg = document.getElementById("cooldownMsg");

  if (last && now - parseInt(last) < 3600000) {
    const remaining = 3600000 - (now - parseInt(last));
    btn.style.display = "none";
    msg.style.display = "block";
    msg.textContent = "‚è≥ Next chat available in " + formatTime(remaining);

    const timer = setInterval(() => {
      const remainingNow = 3600000 - (Date.now() - parseInt(last));
      if (remainingNow <= 0) {
        clearInterval(timer);
        msg.style.display = "none";
        btn.style.display = "inline-block";
      } else {
        msg.textContent = "‚è≥ Next chat available in " + formatTime(remainingNow);
      }
    }, 1000);
  }
}

checkCooldown();

function sendChatMessage() {
  const name = chatName.value.trim();
  const email = chatEmail.value.trim();
  const message = chatMessage.value.trim();
  const honeypot = chatHoneypot.value.trim();
  const answer = parseInt(chatCaptcha.value);
  const responseDiv = chatResponse;

  if (honeypot !== "") return;

  if (Date.now() - chatFormStart < 3000) {
    responseDiv.textContent = "‚è±Ô∏è Please wait a moment before sending.";
    return;
  }

  if (answer !== correctAnswer) {
    responseDiv.textContent = "‚ùå Incorrect answer. Please try again.";
    return;
  }

  if (!name || !email || !message) {
    responseDiv.textContent = "Please fill in all fields.";
    return;
  }

  const formData = new FormData();
  formData.append("name", name);
  formData.append("email", email);
  formData.append("message", message);

  fetch("https://script.google.com/macros/s/AKfycbwkIbW2EzsoG54Adydc0UwnN34au15dm2vnn3Egfhrq69n8HiEdGUgIJQ0riPGLe5k/exec", {
    method: "POST",
    body: formData
  });

  localStorage.setItem(cooldownKey, Date.now().toString());

  responseDiv.innerHTML = `<span class="spinning-icon"></span> Connecting with Engg-Tech Team‚Ä¶`;

  setTimeout(() => {
    responseDiv.innerHTML = `
      <p>üöß All our team members are currently busy.</p>
      <p>Message received! We will reply by email.</p>
      <p>Email: <a href="mailto:info@engg-tech.com"><strong>info@engg-tech.com</strong></a></p>`;
    checkCooldown();
  }, Math.random() * 6000 + 5000);
}

(function(){
  const h = new Date().getHours();
  greeting.textContent =
    (h < 12 ? "Good morning" : h < 18 ? "Good afternoon" : "Good evening") + "!";
})();
</script>

<style>
.spinning-icon {
  display:inline-block;
  width:16px;
  height:16px;
  margin-right:6px;
  border:3px solid #007bff;
  border-radius:50%;
  border-top-color:transparent;
  animation:spin 0.8s linear infinite;
  vertical-align:middle;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
</style>
<!-- Live Chat END -->
</section>
</div>
<!-- Content section END -->

<!-- Global Ads & Analytics -->
<div id="site-ad"></div>
<script src="/sg/assets/scripts.js"></script>

<!-- FOOTER -->
<div id="site-footer"></div>
<script src="/sg/assets/footer.js"></script>

</body>
</html>
