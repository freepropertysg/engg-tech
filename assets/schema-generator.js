document.addEventListener("DOMContentLoaded",()=>{let p=location.pathname,u=location.href,t=document.querySelector("h1")?.innerText||document.title,pt=document.body.innerText||"",d=document.querySelector("time")?.getAttribute("datetime")||"",o="Engg-Tech",dr=document.querySelector('meta[name="description"]')?.content||"",parts=p.split("/").filter(Boolean),seg=parts[0]||null,isCountry=seg&&/^[a-z]{2}$/.test(seg),countryCode=isCountry?seg.toUpperCase():null,countryLabel=isCountry?seg.toUpperCase():null,BASE_URL=isCountry?`https://www.engg-tech.com/${seg}/`:"https://www.engg-tech.com/";(()=>{let h=p;h.endsWith("/")&&(h+="index.html"),!h.endsWith(".html")&&h.includes("/blog/")&&(h+=".html");let c=location.origin+h,l=document.querySelector('link[rel="canonical"]')||document.createElement("link");l.rel="canonical",l.href=c,l.parentNode||document.head.appendChild(l)})();function ed(r,p,t){r=r.replace(/\s+/g," ").trim();let f=p.split(".")[0];!r&&f.length>40&&f.length<200&&(r=f.trim());let ct=t.replace(/[^a-zA-Z0-9 ]/g,""),k=ct.split(" ")[0];k&&!r.toLowerCase().includes(k.toLowerCase())&&(r=ct+": "+r);let geo=countryLabel||"Worldwide";return["engineering services",geo,"construction","jobs","trade services"].forEach(x=>{r.toLowerCase().includes(x.toLowerCase())||(r+=", "+x)}),r.length>155?r.substring(0,152)+"...":r}let desc=ed(dr,pt,t),g=[],a=n=>g.push(n);a({"@type":"WebSite",name:o,url:BASE_URL});let lb={"@type":"LocalBusiness",name:o,url:BASE_URL,description:countryCode?`Engg-Tech is an engineering and construction services platform in ${countryLabel}.`:"Engg-Tech is an international engineering and construction services platform."};countryCode&&(lb.address={"@type":"PostalAddress",addressCountry:countryCode}),a(lb);if(p!=="/"&&p!=="/index.html"){let crumbs=[],run=isCountry?`/${seg}/`:"/";crumbs.push({"@type":"ListItem",position:0,name:"Home",item:{"@type":"WebPage","@id":BASE_URL}}),parts.slice(isCountry?1:0).forEach((s,i)=>{let clean=s.replace(/\.html$/,"");run+=clean+"/",crumbs.push({"@type":"ListItem",position:i+1,name:clean.replace(/[-_]/g," ").replace(/\b\w/g,m=>m.toUpperCase()),item:{"@type":"WebPage","@id":location.origin+run}})}),a({"@type":"BreadcrumbList",itemListElement:crumbs})}if(p==="/"||p==="/index.html")a({"@type":"WebPage",name:"Engg-Tech — Engineering & Construction Services Platform",description:desc,url:u});if(isCountry&&(p===`/${seg}/`||p===`/${seg}/index.html`))a({"@type":"WebPage",name:`Engg-Tech — Engineering & Construction Services in ${countryLabel}`,description:desc,url:u});p.includes("/about")&&a({"@type":"AboutPage",name:t,description:desc,url:u});p.includes("/listings")&&a({"@type":"CollectionPage",name:countryLabel?`All Services — Engg-Tech ${countryLabel}`:"All Services — Engg-Tech",description:desc,url:u});(p.endsWith("/blog/")||p.endsWith("/blog/index.html"))&&a({"@type":"CollectionPage",name:countryLabel?`Engg-Tech Blog — ${countryLabel}`:"Engg-Tech Blog",description:desc,url:u});p.includes("/blog/")&&p.endsWith(".html")&&a({"@type":"BlogPosting",headline:t,description:desc,datePublished:d||new Date().toISOString(),author:{"@type":"Organization",name:o},mainEntityOfPage:u});let fi=[...document.querySelectorAll(".faq-item")];fi.length>1&&a({"@type":"FAQPage",mainEntity:fi.map(x=>{let q=x.querySelector("strong")?.innerText,a1=x.querySelector("p")?.innerText;return q&&a1?{"@type":"Question",name:q,acceptedAnswer:{"@type":"Answer",text:a1}}:null}).filter(Boolean)});g.length||a({"@type":"WebPage",name:t,description:desc,url:u});let sc=document.createElement("script");sc.type="application/ld+json",sc.textContent=JSON.stringify({"@context":"https://schema.org","@graph":g}),document.head.appendChild(sc)});
